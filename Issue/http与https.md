## **1.HTTPS 和 HTTP 的区别：**

```
http1.0与http1.1(长链接)的区别,现在我们用的都是长链接,之前http1.0的版本首先进行tcp三次握手之后就会建立传输通道,传输完成之后就会马上销毁通道,现在新的长链接有所改进,就是tcps三次握手之后,他不会马上销毁通道,他会等待30s之后,在此发送其他请求,这样可以发送多个请求(多个请求是指上一个完成了,下一个接着,不能一下发送多个请求),下一个请求发送完成之后,通道时间又可以相应的延长
http 是超文本传输协议，信息是明文传输，https 则是具有安全性的加密传输协议

http 基于 tcp 协议，tcp 三次握手之后即可开始 http 通信；https 是在 http 与 tcp 之间加了一个 SSL/TLS 安全层，在 tcp 握手之后，还要进行 TLS 握手，才可以开始通信。

http 没有身份认证，存在安全隐患；https 使用证书系统来进行身份认证，使用 https 的网站需要到 CA 申请证书，一般免费证书较少，因而需要一定费用。

http 默认端口是 80，https默认端口 443

```





## 2.TLS的握手过程

```

在 http 协议中，TCP三次握手成功后，浏览器会立即发送请求报文；但是https协议，它还需要另一个握手过程（TLS握手），在TCP上建立安全连接，之后才是收发报文。TLS握手的主要目的是使用非对称加密交换对称密钥，这个对称密钥是由三个随机数生成的。

TLS握手一共4个回合：

1.客户端发出请求

支持的协议版本，比如TLS 1.0版
一个客户端生成的随机数，稍后用于生成"会话密钥"
支持的密码套件（支持的加密方法）

2.服务器回应

确认使用的加密通信协议版本，比如TLS 1.0版本。如果浏览器与服务器支持的版本不一致，服务器关闭加密通信。
一个服务器生成的随机数，稍后用于生成"会话密钥"
确认使用的加密方法，比如RSA公钥加密
服务器证书


3.客户端回应
客户端收到服务器回应以后，开始走证书链逐级验证，确认证书的真实性，如果证书不是可信机构颁布、或者证书中的域名与实际域名不一致、或者证书已经过期，就会向访问者显示一个警告，由其选择是否还要继续通信：
如果证书真实有效，从证书中拿出服务器公钥，向服务器发送下面三项信息：

一个用服务器公钥加密随机数（pre-master key），防止被窃听
编码改变通知，表示随后的信息都将用双方商定的加密方法和密钥发送（Change Cipher Spec）
客户端握手结束通知（Finished），表示客户端的握手阶段已经结束。这一项是把之前所有发送的数据做个摘要（hash值），再加密一下，供服务器校验

上面第一项的随机数，是整个握手阶段出现的第三个随机数，又称"pre-master key"。有了它以后，客户端和服务器就同时有了三个随机数，接着双方就用事先商定的加密方法，各自生成本次会话所用的同一把"会话密钥"。



4.服务器的最后回应
服务器收到客户端的第三个随机数pre-master key之后，计算生成本次会话所用的"会话密钥"。
然后，向客户端最后发送下面信息：

编码改变通知，表示随后的信息都将用双方商定的加密方法和密钥发送（Change Cipher Spec）
服务端握手结束通知（Finished），表示服务端的握手阶段已经结束。这一项是把之前所有发送的数据做个摘要（hash值），再加密一下，供客户端校验

TLS握手结束后，双方开始使用对称会话密钥进行加密通信


```

## 3.HTTPS的优缺点

### 优点

```

使用 HTTPS 协议可认证用户和服务器，确保数据发送到正确的客户机和服务器；

HTTPS 协议是由 SSL/TLS+HTTP 协议构建的可进行加密传输、身份认证的网络协议，要比 http 协议安全，可防止数据在传输过程中不被窃取、改变，确保数据的完整性。

HTTPS 是现行架构下最安全的解决方案，虽然不是绝对安全，但它大幅增加了中间人攻击的成本。

```

### 缺点：

```
HTTPS 协议握手阶段比较费时，会使页面的加载时间延长近 50%，增加 10% 到 20% 的耗电；

HTTPS 连接缓存不如 HTTP 高效，会增加数据开销和功耗

SSL 证书需要钱，功能越强大的证书费用越高，个人网站、小网站没有必要一般不会用。

HTTPS 协议的加密范围也比较有限，在黑客攻击、拒绝服务攻击、服务器劫持等方面几乎起不到什么作用。最关键的，SSL 证书的信用链体系并不安全，特别是在某些国家可以控制 CA 根证书的情况下，中间人攻击一样可行。

```

